From 8499379c7f20c3e1bc390e7e3d1129de7c14362c Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Sun, 28 May 2023 19:25:41 +1000
Subject: [PATCH] vkd3d: Only include required headers

---
 libs/vkd3d/Makefile.in                    | 1 +
 libs/vkd3d/include/private/vkd3d_common.h | 1 +
 2 files changed, 2 insertions(+)

diff --git a/libs/vkd3d/Makefile.in b/libs/vkd3d/Makefile.in
index 1ba0e9f71e1..22bc4abe7b9 100644
--- a/libs/vkd3d/Makefile.in
+++ b/libs/vkd3d/Makefile.in
@@ -1,6 +1,7 @@
 EXTLIB    = libvkd3d.a
 EXTRAINCL = $(VKD3D_PE_CFLAGS) -I$(srcdir)/include/private -I$(srcdir)/libs/vkd3d -I$(srcdir)/libs/vkd3d-shader
 EXTRADEFS = \
+	-DWIN32_LEAN_AND_MEAN \
 	-DWINE_NO_NAMELESS_EXTENSION \
 	-DCONST_VTABLE \
 	-DLIBVKD3D_SOURCE \
diff --git a/libs/vkd3d/include/private/vkd3d_common.h b/libs/vkd3d/include/private/vkd3d_common.h
index 1ac23b4a085..0cb99f69694 100644
--- a/libs/vkd3d/include/private/vkd3d_common.h
+++ b/libs/vkd3d/include/private/vkd3d_common.h
@@ -28,6 +28,7 @@
 #include <stdbool.h>
 #include <stdint.h>
 #include <stdio.h>
+#include <stdlib.h>
 
 #ifdef _MSC_VER
 #include <intrin.h>
-- 
2.40.1

